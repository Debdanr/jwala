ext {
    versions = [ 
                 junit : "4.+",
                 pmd : "4.3",
                 spring : "3.2.6.RELEASE",
                 jackson : "1.4.2",
                 jpa : "2.2.2",
                 h2 : "1.3.175",
                 cxf: "3.0.0-milestone1",
                 javax_ws_rs_api: "2.0"
                ]
}

subprojects {
    apply plugin: "java"
    apply plugin: "jacoco"
    apply plugin: "pmd"

    sourceCompatibility = 1.7
    group = "com.siemens.cto"
    version = "1.0.0"

    repositories {
        maven {
            url "http://usmlvv1srn464/artifactory/repo/"
        }
        maven {
            url "http://usmlvv1nrg645/artifactory/ext-release-local"
        }
    }

    dependencies {
        testCompile "junit:junit:4.11"

        pmd group: "pmd", name: "pmd", version: "$versions.pmd"
    }

    jar {
        manifest {
            attributes(
                "Implementation-Title": project.name,
                "Implementation-Version": project.version + (null ==System.getProperty("BUILD_NUMBER") ? "" : "." + System.getProperty("BUILD_NUMBER")) + (null == System.getProperty("ACCUREV_TRANSACTION") ? "" : "." + System.getProperty("ACCUREV_TRANSACTION")),
                "Built-By": System.getProperty("user.name"),
                "Built-JDK": System.getProperty("java.version"),
                "Built-Host": InetAddress.getLocalHost(),
                "Build-Time-ISO-8601": new Date().format("yyyy-MM-dd'T'HH:mm:ssZ")
            )
        }
    }

    pmdMain {
        reports {
            xml.enabled = true
            html.enabled = false
        }
    }

    pmdTest {
        reports {
            xml.enabled = true
            html.enabled = false
        }
    }

    jacoco {
        toolVersion = "0.6.3.201306030806"
    }

    jacocoTestReport {
        reports {
            xml.enabled = false
            csv.enabled = false
            html.enabled = true
            html.destination "${buildDir}/jacocoHtml"
        }
    }
}
