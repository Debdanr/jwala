<div class="jvm-config-area">
    <table>
        <tr>
            <td></td>
            <td style="width:1px"><div id="addJvmBtn"></div></td>
            <td style="width:1px"><div id="delJvmBtn"></div></td>
        </tr>
        <tr>
            <td colspan="3"><div id="jvmDataGrid"></div></td>
        </tr>
        <!-- The following are for groups and should be moved 
        Otherwise it will not show up if there are lots of JVMs! -->
        <tr><td><br /></td></tr>
        <tr><td><br /></td></tr>
        <tr><td><br /></td></tr>
        <tr><td><br /></td></tr>
        <tr>
            <td></td>
            <td style="width:1px"><div id="addGroupBtn"></div></td>
            <td style="width:1px"><div id="delGroupBtn"></div></td>
        </tr>
        <tr>
         <td colspan="3">
          <table id="groupDataTable">
            <thead>
              <tr>
                <th>[-/+]</th>
                <th>Group Name</th>
                <th>[-/+]</th>
                <th>JVM</th>
                <th>Web App</th>
                <th>Blank</th>
                <th>Edit</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>  
         </td>
        </tr>
    </table>
</div>

<div id="jvmEditDialog"/>

<script type="text/javascript">

    /**
     * Callback to handle JVM form specific data transformation
     */
    var jvmJsonFormDataTransformerCallback = function(data) {
        var formJson = {};

        var nameMap = {};
        nameMap["id"] = "jvmId";
        nameMap["name"] = "jvmNameId";
        nameMap["host"] = "hostNameId";

        $.each(data.applicationResponseContent.content, function(i, obj) {
            if (nameMap[i] !== undefined) {
                  formJson[nameMap[i]] = obj;
            }
        });
        return formJson;
    }

    var jvmDataGrid = DataGrid({theme:"default",
                                header:["JVM Name", "Host Name", "Group Name"],
                                url:"v1.0/jvms/",
                                editDialog:ModalFormEditDialog({formId:"jvmAddEditForm",
                                title:"Edit JVM"}),
                                jsonFormDataTransformerCallback:jvmJsonFormDataTransformerCallback});

    React.renderComponent(jvmDataGrid,
        document.getElementById("jvmDataGrid"));

    var jvmAddModalDialog = ModalFormAddDialog({formId:"jvmAddEditForm",
                                                title:"Add JVM"});

    React.renderComponent(ModalButton({label:"Add", modalDialog:jvmAddModalDialog, view:jvmDataGrid}),
        document.getElementById("addJvmBtn"));

    React.renderComponent(DeleteItemWidget({dataGrid:jvmDataGrid, url:"v1.0/jvms/"}),
                          document.getElementById("delJvmBtn"));



</script>

<script type="text/javascript">


    /**
     * Callback to handle JVM form specific data transformation
     */
    var groupJsonFormDataTransformerCallback = function(data) {
        var formJson = {};

        var nameMap = {};
        nameMap["id"] = "groupId";
        nameMap["name"] = "groupNameId";
        nameMap["host"] = "hostNameId";

        $.each(data.applicationResponseContent.content, function(i, obj) {
            if (nameMap[i] !== undefined) {
                  formJson[nameMap[i]] = obj;
            }
        });
        return formJson;
    }

    var groupDataGrid = DataGrid({theme:"default",
                                header:["Group Name", "Host Name", "Group Name"],
                                url:"v1.0/v1/groups/",
                                editDialog:ModalFormEditDialog({formId:"groupAddEditForm",
                                title:"Edit Group"}),
                                jsonFormDataTransformerCallback:groupJsonFormDataTransformerCallback});

    var table = $('#groupDataTable').DataTable();

    var groupAddModalDialog = ModalFormAddDialog({formId:"groupAddEditForm",
                                                title:"Add Group"});

    React.renderComponent(ModalButton({label:"Add", modalDialog:groupAddModalDialog, view:groupDataGrid}),
        document.getElementById("addGroupBtn"));

    React.renderComponent(DeleteItemWidget({dataGrid:groupDataGrid, url:"v1.0/v1/groups/"}),
                          document.getElementById("delGroupBtn"));

</script>

<div style="display:none">
    <form id="jvmAddEditForm" action="v1.0/jvms">
        <input id="jvmId" name="id" type="hidden" />
        <table>
            <tr>
                <td>Name</td>
            </tr>
            <tr>
                <td><input id="jvmNameId" name="jvmName" type="text" maxlength="100"></td>
            </tr>
            <tr>
                <td>Host</td>
            </tr>
            <tr>
                <td><input id="hostNameId" name="hostName" type="text" maxlength="50"/></td>
            </tr>
            <tr>
                <td>
                    Group
                </td>
            </tr>
            <tr>
                <td>
                    <select id="groupNameId" name="groupName">
                        <option value="Group 1">Group 1</option>
                        <option value="Group 2">Group 2</option>
                        <option value="Group 3">Group 3</option>
                        <option value="Group 4">Group 4</option>
                        <option value="Group 4">Group 5</option>
                    </select>
                </td>
            </tr>
        </table>
    </form>
</div>


<div style="display:none">
    <form id="groupAddEditForm" action="v1.0/groups">
        <input id="groupId" name="id" type="hidden" />
        <table>
            <tr>
                <td>Name</td>
            </tr>
            <tr>
                <td><input id="groupNameId" name="groupName" type="text" maxlength="100"></td>
            </tr>
            <tr>
                <td>Host</td>
            </tr>
            <tr>
                <td><input id="hostNameId" name="hostName" type="text" maxlength="50"/></td>
            </tr>
        </table>
    </form>
</div>